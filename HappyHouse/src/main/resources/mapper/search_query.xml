<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Config 3.0//EN"    "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.ssafy.happyhouse.dao.SearchDao">
	<select id="sidoList" resultType="string">
		SELECT NAME FROM SIDO_CODE ORDER BY NAME ASC
	</select>
	
	<select id="gugunList" parameterType="string" resultType="string">
		SELECT g.NAME 
		  From SIDO_CODE s, GUGUN_CODE g 
		 WHERE s.CODE = g.SIDO_CODE 
		 AND s.NAME = #{sidoName} ORDER BY g.NAME ASC;
	</select>
	
	<select id="dongList" parameterType="string" resultType="string">
		SELECT d.NAME 
  		  FROM (SELECT g.SIDO_CODE, s.NAME AS SIDO_NAME, g.NAME AS GUGUN_NAME, g.CODE 
				FROM SIDO_CODE s, GUGUN_CODE g
        		WHERE s.CODE = g.SIDO_CODE AND s.NAME = #{sidoName}) sg, DONG_CODE d
 		  WHERE sg.CODE = d.GUGUN_CODE AND sg.SIDO_NAME = #{sidoName} AND sg.GUGUN_NAME = #{gugunName};
	</select>
</mapper>